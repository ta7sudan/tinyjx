{"version":3,"file":"tinyjx.esm.js","sources":["../src/index.js"],"sourcesContent":["/* global DEBUG */\nconst isFn = fn => typeof fn === 'function';\n\nconst isJSON = cType => /application\\/json/i.test(cType);\n\nconst isForm = cType => /application\\/x-www-form-urlencoded/i.test(cType);\n\nconst isStr = v => v && typeof v === 'string';\n\nconst isObj = o => Object.prototype.toString.call(o) === '[object Object]';\n\nconst lc = window.location;\n\nconst xhrPool = [],\n\tArrayBufferView = Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array())).constructor,\n\tMIME = {\n\t\tjson: 'application/json',\n\t\tform: 'application/x-www-form-urlencoded',\n\t\thtml: 'text/html',\n\t\txml: 'application/xml',\n\t\ttext: 'text/plain'\n\t},\n\tevents = [\n\t\t'onloadstart',\n\t\t'onprogress',\n\t\t'onabort',\n\t\t'onerror',\n\t\t'onload',\n\t\t'ontimeout',\n\t\t'onloadend',\n\t\t'onreadystatechange'\n\t];\n\nlet jsonpId = Date.now(),\n\tcacheRand = Date.now() + 5,\n\tglobalSerialize = null,\n\tglobalDeserialize = null;\n\nif (DEBUG) {\n\tvar xhrId = 0;\n}\n\nfunction createXhr() {\n\tconst xhr = new XMLHttpRequest();\n\tObject.defineProperty(xhr, '_active', {\n\t\tvalue: false,\n\t\twritable: true,\n\t\tenumerable: false\n\t});\n\tif (DEBUG) {\n\t\tObject.defineProperty(xhr, '_id', {\n\t\t\tvalue: ++xhrId,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t});\n\t}\n\treturn xhr;\n}\n\nfunction resetXhr(xhr) {\n\t// responseType, withCredentials以及header相关的会在open后重置\n\txhr._active = false;\n\t// 可能是同步请求那就不能设置timeout\n\ttry {\n\t\txhr.timeout = 0;\n\t\txhr.requestURL = '';\n\t\t/* eslint-disable-next-line */\n\t} catch (e) { }\n\tevents.forEach(v => (xhr[v] = null));\n\txhr.upload && events.forEach(v => (xhr.upload[v] = null));\n}\n\nfunction xhrFactory() {\n\tfor (let i = 0, len = xhrPool.length; i < len; ++i) {\n\t\tif (!xhrPool[i]._active) {\n\t\t\treturn xhrPool[i];\n\t\t}\n\t}\n\treturn createXhr();\n}\n\nfunction querystring(obj) {\n\tif (isObj(obj)) {\n\t\treturn Object.keys(obj)\n\t\t\t.map(\n\t\t\t\tk =>\n\t\t\t\t\tArray.isArray(obj[k])\n\t\t\t\t\t\t? obj[k]\n\t\t\t\t\t\t\t.map(v => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n\t\t\t\t\t\t\t.join('&')\n\t\t\t\t\t\t: `${encodeURIComponent(k)}=${encodeURIComponent(obj[k])}`\n\t\t\t)\n\t\t\t.join('&');\n\t} else {\n\t\treturn JSON.stringify(obj);\n\t}\n}\n\nfunction defaultSerialize({ data, method, contentType = MIME.json, url, cache }) {\n\tif (!cache) {\n\t\turl += ~url.indexOf('?') ? `&_=${++cacheRand}` : `?_=${++cacheRand}`;\n\t}\n\tif (method === 'GET' || method === 'HEAD') {\n\t\treturn {\n\t\t\turl,\n\t\t\tdata\n\t\t};\n\t}\n\tif (\n\t\tdata instanceof Document ||\n\t\t// URLSearchParams和ReadableStream暂时不考虑支持了, 浏览器版本要求比较高\n\t\t// data instanceof URLSearchParams ||\n\t\t// data instanceof ReadableStream ||\n\t\tdata instanceof Blob ||\n\t\tdata instanceof FormData ||\n\t\tdata instanceof ArrayBuffer ||\n\t\tdata instanceof ArrayBufferView ||\n\t\ttypeof data === 'string'\n\t) {\n\t\treturn {\n\t\t\turl,\n\t\t\tdata\n\t\t};\n\t}\n\tif (isJSON(contentType)) {\n\t\tdata = JSON.stringify(data);\n\t} else if (isForm(contentType)) {\n\t\tdata = querystring(data);\n\t} else {\n\t\tthrow new TypeError(\n\t\t\t'Unknown data type, you can provide a custom serialize function in options to override the default.'\n\t\t);\n\t}\n\treturn {\n\t\turl,\n\t\tdata\n\t};\n}\n\nfunction defaultDeserialize({ data, contentType, acceptType }) {\n\tlet rst = null;\n\tif (isStr(data) && (isJSON(contentType) || isJSON(acceptType))) {\n\t\ttry {\n\t\t\trst = JSON.parse(data);\n\t\t} catch (e) {\n\t\t\tconsole.error('Invalid json string');\n\t\t\trst = data;\n\t\t}\n\t} else {\n\t\trst = data;\n\t}\n\treturn rst;\n}\n\nfunction setHeaders(xhr, headers) {\n\tif (isObj(headers)) {\n\t\tObject.keys(headers).forEach(k => xhr.setRequestHeader(k, headers[k]));\n\t}\n}\n\nfunction setEvents(target, evts) {\n\tif (isObj(evts) && target) {\n\t\t// 不用addEventListener是它不方便reset\n\t\tObject.keys(evts)\n\t\t\t.filter(k => events.includes(k))\n\t\t\t.forEach(k => target[k] = evts[k]);\n\t}\n}\n\nfunction jsonp(options) {\n\tlet {\n\t\turl,\n\t\tcache = false,\n\t\tcrossorigin,\n\t\tcallbackName,\n\t\tsuccess,\n\t\tbeforeSend,\n\t\tcomplete,\n\t\terror\n\t} = options;\n\n\tconst hasOriginalCb = isFn(window[callbackName]);\n\tif (isStr(callbackName) && !hasOriginalCb) {\n\t\tthrow new Error(`${callbackName} is not a function.`);\n\t}\n\n\tconst hasSuccessCb = isFn(success),\n\t\thasErrorCb = isFn(error),\n\t\thasCompleteCb = isFn(complete),\n\t\toriginalCb = hasOriginalCb ? window[callbackName] : undefined;\n\n\tif (!hasSuccessCb && !hasCompleteCb & !hasOriginalCb) {\n\t\tthrow new Error('Must set a success callback or complete callback.');\n\t}\n\tif (!isStr(url)) {\n\t\tthrow new TypeError(`url expected a non empty string, but received ${JSON.stringify(url)}.`);\n\t}\n\n\tconst hasCustomCbName = isStr(callbackName),\n\t\tcbName = hasCustomCbName ? callbackName : `jsonp${++jsonpId}`,\n\t\tscript = document.createElement('script');\n\n\tif (url.split('?').length < 3) {\n\t\t// 没有占位符的话默认callback\n\t\tconst qs = `callback=${encodeURIComponent(cbName)}`;\n\t\turl = ~url.indexOf('?') ? `${url}&${qs}` : `${url}?${qs}`;\n\t} else {\n\t\turl = url.replace(/\\?(.+)=\\?/, `?$1=${encodeURIComponent(cbName)}`);\n\t}\n\t!cache && (url += `&_=${++cacheRand}`);\n\n\tif (!window[cbName] || !window[cbName].hasHook) {\n\t\twindow[cbName] = function (...args) {\n\t\t\t// 放前面, 防止后面的callback抛异常导致删不掉\n\t\t\tif (!hasCustomCbName) {\n\t\t\t\tdelete window[cbName];\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (hasOriginalCb) {\n\t\t\t\t\toriginalCb(...args);\n\t\t\t\t} else if (hasSuccessCb) {\n\t\t\t\t\tsuccess(...args);\n\t\t\t\t}\n\t\t\t\thasCompleteCb && complete('success');\n\t\t\t\thasOriginalCb && (window[callbackName] = originalCb);\n\t\t\t} catch (e) {\n\t\t\t\t// 个人觉得应该crash掉让用户修复异常而不是继续执行complete\n\t\t\t\t// 所以这里只是为了还原window上原有的函数而不是为了吞掉异常\n\t\t\t\thasOriginalCb && (window[callbackName] = originalCb);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t};\n\t\twindow[cbName].hasHook = true;\n\t}\n\n\tscript.onerror = function (e) {\n\t\tdocument.body.removeChild(script);\n\t\tif (!hasCustomCbName) {\n\t\t\tdelete window[cbName];\n\t\t}\n\t\t// 都没有的话就继续抛出异常, 方便异常监控系统捕获\n\t\tif (!hasErrorCb && !hasCompleteCb) {\n\t\t\tthrow new Error(`Load script ${url} failed.`);\n\t\t}\n\t\thasErrorCb && error(new Error(`Load script ${url} failed.`), e);\n\t\thasCompleteCb && complete('error');\n\t};\n\n\tscript.onload = () => setTimeout(() => document.body.removeChild(script), 3000);\n\n\tcrossorigin && (script.crossOrigin = crossorigin);\n\tscript.src = url;\n\n\tif (isFn(beforeSend)) {\n\t\tsetTimeout(() => {\n\t\t\t// 允许拦截掉不发送请求\n\t\t\tconst rst = beforeSend(url, options);\n\t\t\trst !== false && document.body.appendChild(script);\n\t\t});\n\t} else {\n\t\tdocument.body.appendChild(script);\n\t}\n}\n\nfunction getResponse(xhr, key) {\n\t// 在有responseType的情况下, 访问responseXML, responseText等都有可能抛出异常\n\ttry {\n\t\treturn xhr[key];\n\t} catch (e) {\n\t\treturn null;\n\t}\n}\n\nfunction ajax(options) {\n\tlet {\n\t\turl = lc.href,\n\t\tmethod = 'GET',\n\t\tcontentType: reqCtype,\n\t\tbeforeSend,\n\t\tcomplete,\n\t\tdata: reqRawData,\n\t\tdataType: acceptType = 'json',\n\t\terror,\n\t\theaders,\n\t\tmimeType,\n\t\tresponseType = '',\n\t\tusername,\n\t\tpassword,\n\t\tsuccess,\n\t\ttimeout = 0,\n\t\tontimeout,\n\t\tevents,\n\t\tuploadEvents,\n\t\twithCredentials = false,\n\t\tcache = true,\n\t\tserialize,\n\t\tdeserialize\n\t} = options;\n\n\tmethod = method.toUpperCase().trim();\n\t// IE是什么...\n\t// xhr不支持CONNECT, TRACE, TRACK方法\n\tif (!['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'HEAD', 'OPTIONS'].includes(method)) {\n\t\tthrow new Error(`Invalid HTTP method: ${method}`);\n\t}\n\t// 允许所有callback都没有\n\n\t// 准备数据\n\tif (isStr(reqCtype)) {\n\t\tMIME[reqCtype] && (reqCtype = MIME[reqCtype]);\n\t} else if (reqCtype) {\n\t\tthrow new TypeError(\n\t\t\t'contentType could be \"json\", \"form\", \"html\", \"xml\", \"text\" or other custom string.'\n\t\t);\n\t}\n\n\tconst slz = isFn(serialize)\n\t\t\t? serialize\n\t\t\t: isFn(globalSerialize)\n\t\t\t\t? globalSerialize\n\t\t\t\t: defaultSerialize,\n\t\tdslz = isFn(deserialize)\n\t\t\t? deserialize\n\t\t\t: isFn(globalDeserialize)\n\t\t\t\t? globalDeserialize\n\t\t\t\t: defaultDeserialize,\n\t\tmaybeProtocol = /^([\\w-]+:)\\/\\//.exec(url),\n\t\tprotocol = maybeProtocol ? maybeProtocol[1] : /^(https?):\\/\\//.exec(lc.href)[1],\n\t\txhr = xhrFactory(),\n\t\thasCompleteCb = isFn(complete),\n\t\thasErrorCb = isFn(error),\n\t\thasSuccessCb = isFn(success);\n\n\tlet reqData,\n\t\terrCalled = false,\n\t\tcompleteCalled = false;\n\t// 这里不用捕获异常去重置xhr是因为xhr还没激活\n\t({ url, data: reqData } = slz({ data: reqRawData, method, contentType: reqCtype, url, cache }));\n\n\t// 初始化xhr\n\txhr._active = true;\n\txhr.open(method, url, true, username, password);\n\t!xhr.requestURL && (xhr.requestURL = url);\n\n\t// 设置必要的头部\n\tif (reqCtype) {\n\t\txhr.setRequestHeader('Content-Type', reqCtype);\n\t} else if (isStr(reqData)) {\n\t\t// 不在默认参数设json是为了让FormData之类的能够由浏览器自己设置\n\t\t// 这里只对字符串的body设置默认为json\n\t\txhr.setRequestHeader('Content-Type', MIME.json);\n\t}\n\tif (isStr(acceptType)) {\n\t\tMIME[acceptType] && (acceptType = MIME[acceptType]);\n\t\txhr.setRequestHeader('Accept', acceptType);\n\t}\n\tsetHeaders(xhr, headers);\n\n\tisStr(mimeType) && xhr.overrideMimeType(mimeType);\n\n\t// 主要是给progress等事件用, 但存在破坏封装的风险\n\tsetEvents(xhr, events);\n\tsetEvents(xhr.upload, uploadEvents);\n\n\twithCredentials && (xhr.withCredentials = withCredentials);\n\tresponseType && (xhr.responseType = responseType);\n\ttimeout && (xhr.timeout = timeout);\n\tif (isFn(ontimeout)) {\n\t\txhr.ontimeout = function (e) {\n\t\t\tontimeout(e);\n\t\t\thasCompleteCb && complete(this, 'timeout');\n\t\t};\n\t} else if (timeout && !isFn(xhr.ontimeout)) {\n\t\txhr.ontimeout = function () {\n\t\t\tif (hasCompleteCb) {\n\t\t\t\tcomplete(this, 'timeout');\n\t\t\t} else {\n\t\t\t\t// 如果没监听ontimeout但是设置了timeout, window.onerror不会捕获这个错误, 所以手动抛个\n\t\t\t\tthrow new Error(`Request ${this.requestURL} timeout.`);\n\t\t\t}\n\t\t};\n\t}\n\n\t// loadend无论同步还是异步请求, 无论前面的事件是否抛异常, 它都会执行\n\tif (isFn(xhr.onloadend)) {\n\t\tconst originalLoadend = xhr.onloadend;\n\t\txhr.onloadend = function (e) {\n\t\t\tresetXhr(this);\n\t\t\toriginalLoadend.call(this, e);\n\t\t};\n\t} else {\n\t\txhr.onloadend = function () {\n\t\t\tresetXhr(this);\n\t\t};\n\t}\n\t// 覆盖掉用户自定义onreadystatechange\n\txhr.onreadystatechange = function (e) {\n\t\tif (this.readyState === 4) {\n\t\t\tconst resCtype = this.getResponseHeader('Content-Type');\n\t\t\t// 这里也不用捕获异常, 因为xhr.onloadend会在之后帮我们回收xhr\n\t\t\tconst resData = dslz({\n\t\t\t\tdata: getResponse(xhr, 'responseXML') || getResponse(xhr, 'response') || getResponse(xhr, 'responseText'),\n\t\t\t\tcontentType: resCtype,\n\t\t\t\tacceptType\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\t(this.status >= 200 && this.status < 300) ||\n\t\t\t\tthis.status == 304 ||\n\t\t\t\t(this.status == 0 && protocol == 'file:')\n\t\t\t) {\n\t\t\t\t// 异常直接抛\n\t\t\t\thasSuccessCb && success(resData, this, e);\n\t\t\t\thasCompleteCb && complete(this, 'success');\n\t\t\t} else if (this.status !== 0) {\n\t\t\t\t// 这类错误xhr.onerror和window.onerror都不捕获所以手动抛一个\n\t\t\t\tif (!hasErrorCb && !hasCompleteCb) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Remote server error. Request URL: ${this.requestURL}, Status code: ${this.status}, message: ${this.statusText}, response: ${this.responseText}.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t// 理论上来讲好像没必要再注册xhr.onerror了, 因为如果有error那status必然为0\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/status\n\t\t\t\t// 但是不加个心里不踏实...总感觉会不会有浏览器没按规范实现\n\t\t\t\t// 不过知名的库页都没监听onerror, 那说明应该是都按规范实现了的\n\t\t\t\t// 但是我要加!!!\n\t\t\t\tif (hasErrorCb) {\n\t\t\t\t\terrCalled = true;\n\t\t\t\t\terror(new Error(`Remote server error. Request URL: ${this.requestURL}, Status code: ${this.status}, message: ${this.statusText}, response: ${this.responseText}.`), resData, this, e);\n\t\t\t\t}\n\t\t\t\tif (hasCompleteCb) {\n\t\t\t\t\tcompleteCalled = true;\n\t\t\t\t\tcomplete(this, 'error');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t// 覆盖\n\txhr.onerror = function (e) {\n\t\t// 跨域错误会在这里捕获, 但是window.onerror不捕获, 所以也手动抛一个\n\t\tif (!hasErrorCb && !hasCompleteCb) {\n\t\t\tthrow new Error(`An error occurred, maybe crossorigin error. Request URL: ${this.requestURL}, Status code: ${this.status}.`);\n\t\t}\n\t\tif (!errCalled && hasErrorCb) {\n\t\t\terror(new Error(`Network error or browser restricted. Request URL: ${this.requestURL}, Status code: ${this.status}`), undefined, this, e);\n\t\t}\n\t\tif (!completeCalled && hasCompleteCb) {\n\t\t\tcomplete(this, 'error');\n\t\t}\n\t};\n\n\t// 哎...都异步吧\n\tif (isFn(beforeSend)) {\n\t\tsetTimeout(() => {\n\t\t\tlet rst;\n\t\t\ttry {\n\t\t\t\trst = beforeSend(xhr, options);\n\t\t\t} catch (e) {\n\t\t\t\t// 恶心之处就在于每个用户定义的callback都可能触发异常, 然而我还要回收xhr\n\t\t\t\tresetXhr(xhr);\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tif (rst !== false) {\n\t\t\t\txhr.send(reqData || null);\n\t\t\t} else {\n\t\t\t\tresetXhr(xhr);\n\t\t\t}\n\t\t});\n\t} else {\n\t\txhr.send(reqData || null);\n\t}\n\t// 不暴露xhr\n\treturn {\n\t\tabort() {\n\t\t\txhr.abort();\n\t\t}\n\t};\n}\n\nexport function config({ pool = false, serialize, deserialize } = {}) {\n\tif (pool) {\n\t\txhrPool.length = 0;\n\t\tlet poolSize = typeof pool === 'number' ? pool : 5;\n\t\tif (poolSize < 0) {\n\t\t\tthrow new Error('pool size must >= 0');\n\t\t}\n\t\twhile (poolSize--) {\n\t\t\txhrPool.push(createXhr());\n\t\t}\n\t}\n\tisFn(serialize) && (globalSerialize = serialize);\n\tisFn(deserialize) && (globalDeserialize = deserialize);\n}\n\nexport { ajax, jsonp };\n\nexport function get(url, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tmethod: 'GET'\n\t});\n}\n\nexport function head(url, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tmethod: 'HEAD'\n\t});\n}\n\nexport function post(url, data, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tdata,\n\t\tmethod: 'POST'\n\t});\n}\n\nexport function put(url, data, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tdata,\n\t\tmethod: 'PUT'\n\t});\n}\n\nexport function del(url, data, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tdata,\n\t\tmethod: 'DELETE'\n\t});\n}\n\nexport function patch(url, data, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tdata,\n\t\tmethod: 'PATCH'\n\t});\n}\n\nexport function options(url, data, options) {\n\treturn ajax({\n\t\t...options,\n\t\turl,\n\t\tdata,\n\t\tmethod: 'OPTIONS'\n\t});\n}\n"],"names":["isFn","fn","isJSON","cType","test","isForm","isStr","v","isObj","o","Object","prototype","toString","call","lc","window","location","xhrPool","ArrayBufferView","getPrototypeOf","Uint8Array","constructor","MIME","json","form","html","xml","text","events","jsonpId","Date","now","cacheRand","globalSerialize","globalDeserialize","createXhr","xhr","XMLHttpRequest","defineProperty","value","writable","enumerable","resetXhr","_active","timeout","requestURL","e","forEach","upload","xhrFactory","i","len","length","querystring","obj","keys","map","k","Array","isArray","encodeURIComponent","join","JSON","stringify","defaultSerialize","data","method","contentType","url","cache","indexOf","Document","Blob","FormData","ArrayBuffer","TypeError","defaultDeserialize","acceptType","rst","parse","console","error","setHeaders","headers","setRequestHeader","setEvents","target","evts","filter","includes","jsonp","options","crossorigin","callbackName","success","beforeSend","complete","hasOriginalCb","Error","hasSuccessCb","hasErrorCb","hasCompleteCb","originalCb","undefined","hasCustomCbName","cbName","script","document","createElement","split","qs","replace","hasHook","args","onerror","body","removeChild","onload","setTimeout","crossOrigin","src","appendChild","getResponse","key","ajax","href","reqCtype","reqRawData","dataType","mimeType","responseType","username","password","ontimeout","uploadEvents","withCredentials","serialize","deserialize","toUpperCase","trim","slz","dslz","maybeProtocol","exec","protocol","reqData","errCalled","completeCalled","open","overrideMimeType","onloadend","originalLoadend","onreadystatechange","readyState","resCtype","getResponseHeader","resData","status","statusText","responseText","send","abort","config","pool","poolSize","push","get","head","post","put","del","patch"],"mappings":"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"}